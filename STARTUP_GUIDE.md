# 🚀 教材プラットフォーム スタートアップガイド

**最終更新**: 2026-01-07  
**バージョン**: 1.0  
**所要時間**: 5分でスタート可能  

---

## 📋 目次
1. [クイックスタート](#クイックスタート)
2. [システム概要](#システム概要)
3. [講義の始め方](#講義の始め方)
4. [講師モード操作ガイド](#講師モード操作ガイド)
5. [受講者モード操作ガイド](#受講者モード操作ガイド)
6. [トラブルシューティング](#トラブルシューティング)
7. [よくある質問（FAQ）](#よくある質問faq)

---

## 🎯 クイックスタート

### 前提条件
- ✅ Flaskアプリが起動済み（`python app.py`）
- ✅ 全9教材（167ページ）が変換済み
- ✅ ネットワーク接続が安定している

### アクセスURL
```
https://5000-io03tl6brmjjjtvbi4p77-0e616f0a.sandbox.novita.ai
```

### 5分でスタート

#### ステップ1: 教材選択（30秒）
1. 上記URLにアクセス
2. 教材一覧から「⑧鉄筋工事１」を選択
3. 「講義ルーム作成」ボタンをクリック

#### ステップ2: URL共有（30秒）
```
講師用URL: /instructor/{room_id}
受講者用URL: /student/{room_id}
```
- 講師用URLを講師のブラウザで開く
- 受講者用URLを受講者全員に共有（メール、チャット等）

#### ステップ3: 接続確認（1分）
- 講師画面: 右パネル「制御」タブで参加者数を確認
- 受講者画面: 「講師と同期中」表示を確認

#### ステップ4: 講義開始（3分〜）
- 講師が「同期ON」を確認
- ページ送りボタンでスライド進行
- 注釈ツール（ピン・レーザーポインタ）で説明
- 重要ポイントカードで要点を強調

**🎉 これで講義を開始できます！**

---

## 📚 システム概要

### 何ができるか？

#### 1. 講師主導のリアルタイム同期
- 講師がページを送ると全受講者が自動で同じページへ
- 同期速度: **1秒以内**
- 途中参加者も現在ページに即復帰

#### 2. 視覚的な注釈ツール
- **ピン**: 特定箇所を指示
- **レーザーポインタ**: 一時的な指示（3秒で自動消去）
- **重要ポイントカード**: モーダルで要点表示

#### 3. 学習支援メタデータ
- **講師ノート**: ページごとに3〜7点の解説
- **用語**: そのページで出る専門用語の定義
- **チェックリスト**: 検査・確認の流れ

#### 4. フィードバック収集
- 講義後に受講者・講師からフィードバード収集
- 統計分析で改善点を可視化

### 対応教材（全9種類）

| No. | 教材名 | ページ数 | メタデータ |
|-----|--------|----------|-----------|
| ③ | 仮設工事 | 16 | ⏳ 未実装 |
| ⓸ | 山留工事 | 20 | ⏳ 未実装 |
| ⑤ | 杭工事 | 18 | ⏳ 未実装 |
| ⑥ | 掘削工事・山留支保工工事 | 18 | ⏳ 未実装 |
| ⑦ | 躯体工事の流れと型枠工事 | 23 | ⏳ 未実装 |
| ⑧ | 鉄筋工事１ | 18 | ✅ **完備** |
| ⑨ | 鉄筋工事２ | 18 | ⏳ 未実装 |
| ⑩ | コンクリート工事１ | 19 | ⏳ 未実装 |
| ⑪ | コンクリート工事２改 | 17 | ⏳ 未実装 |

**合計: 167ページ**

---

## 🎓 講義の始め方

### A. 事前準備（講義の1日前）

#### 1. 教材選択
- 使用する教材を決定
- **推奨**: ⑧鉄筋工事１（メタデータ完備）

#### 2. 講義構成の確認
```
教材: ⑧鉄筋工事１
時間: 30分〜90分
構成:
  - 導入（5分）: 配筋検査の重要性
  - 基本（10分）: 種類・定着・かぶり
  - 実践（10分）: 図面の見方
  - まとめ（5分）: チェックポイント確認
```

#### 3. テストルームで予行演習
- ルームを作成して操作確認
- 注釈ツールの練習
- 重要ポイントカードの確認

### B. 講義当日（開始15分前）

#### 1. ルーム作成
```bash
# API経由でルーム作成
curl -X POST http://localhost:5000/api/rooms \
  -H "Content-Type: application/json" \
  -d '{"material_id": "⑧鉄筋工事１"}'
```

または

1. トップページにアクセス
2. 「⑧鉄筋工事１」を選択
3. 「講義ルーム作成」をクリック

#### 2. URL共有
```
講師用URL: https://5000-...novita.ai/instructor/abc123
受講者用URL: https://5000-...novita.ai/student/abc123
```

**共有方法**:
- メール
- チャット（Slack、Teams等）
- QRコード

#### 3. 接続確認（開始10分前）
- 講師画面を開く
- 右パネル「制御」タブで「同期ON」を確認
- 参加者が入室するのを待つ

#### 4. 音声・ビデオ（別ツール）
このシステムは**教材同期専用**です。音声・ビデオは別途：
- Zoom
- Google Meet
- Microsoft Teams

### C. 講義開始

#### 開始の挨拶
```
「本日は⑧鉄筋工事１を使って、配筋検査の基本を学びます。
 画面右下に『講師と同期中』と表示されていますか？
 表示されている方は、私がページを送ると自動で切り替わります。」
```

#### 同期確認
1. 講師がページ2へ移動
2. 全受講者の画面がページ2になることを確認
3. 「全員ページ2が表示されていますか？」と確認

---

## 👨‍🏫 講師モード操作ガイド

### 画面構成

```
┌─────────────────────────────────────────────────────────┐
│ ヘッダー: 教材名・ルームID・接続状態                       │
├──────┬──────────────────────────────────┬──────────────┤
│      │                                  │              │
│ 左   │        中央: ページ表示           │   右パネル   │
│      │                                  │              │
│ サイド│    ・高解像度画像                │ - 講師ノート │
│ バー │    ・注釈レイヤー                │ - 制御       │
│      │    ・ズーム・パン                │ - 重要ポイント│
│      │                                  │ - 参加者一覧 │
│ (サム│                                  │              │
│ ネイル│                                  │              │
│  ＋  │                                  │              │
│ 章)  │                                  │              │
│      │                                  │              │
├──────┴──────────────────────────────────┴──────────────┤
│ ツールバー: ページ送り・ズーム・注釈ツール                 │
└─────────────────────────────────────────────────────────┘
```

### 基本操作

#### ページ送り
- **ボタン**: `◀ 前` `次 ▶` ボタン
- **キーボード**: `←` `→` 矢印キー
- **サムネイル**: 左サイドバーのサムネイルをクリック

#### ズーム
- **マウスホイール**: 上下でズームイン/アウト
- **ボタン**: `+` `-` ボタン
- **フィット**: `Fit` ボタンで画面にフィット

#### パン（移動）
- **ドラッグ**: ズーム時に画像をドラッグ

### 注釈ツール

#### 1. ピン（📍）
**用途**: 特定箇所を指示

**操作**:
1. ツールバーで「ピン」を選択
2. 画像上をクリック
3. 赤いピンが表示される
4. 全受講者の画面にも同時表示

**削除**:
- ピンをクリック → 「削除」

#### 2. レーザーポインタ（🔦）
**用途**: 一時的な指示

**操作**:
1. ツールバーで「レーザー」を選択
2. 画像上をクリック
3. 黄色の光点が表示される
4. **3秒後に自動消去**

**特徴**:
- 消し忘れなし
- 動的な説明に最適

#### 3. 重要ポイントカード（⭐）
**用途**: 要点を強調表示

**操作**:
1. 右パネル「重要ポイント」タブ
2. カードを選択（例: 「配筋検査の確認要点」）
3. 全受講者にモーダルで表示される

**カード一覧**:
- 配筋検査の確認要点
- コンクリート荷卸し確認
- 打設時の役割分担
- 不具合写真の見方

### 同期制御

#### 同期ON/OFF
**場所**: 右パネル「制御」タブ

**同期ON**（デフォルト）:
- 講師がページ送り → 全受講者が自動追従
- 受講者は自分でページ送り不可

**同期OFF**:
- 受講者が自由にページ閲覧可能
- 復習や質問時に使用

**使い分け**:
```
講義中: 同期ON（講師主導）
休憩時: 同期OFF（自由閲覧）
質疑応答: 同期OFF（個別確認）
まとめ: 同期ON（全員で確認）
```

### 講師ノートの活用

**場所**: 右パネル「講師ノート」タブ

**内容**:
- ページごとに3〜7点の要点
- 講師用の説明ポイント

**例（⑧鉄筋工事１ ページ5）**:
```
✓ 定着長さは鉄筋径の40倍が基本
✓ フックは定着長さに含まない
✓ 重ね継手は引張側で40d、圧縮側で25d
✓ 継手位置は応力の小さい箇所に配置
```

**活用方法**:
1. ページ表示前にノートを確認
2. ノートに沿って説明
3. 受講者は右パネルで同じノートを閲覧

---

## 🎓 受講者モード操作ガイド

### 画面構成

```
┌─────────────────────────────────────────────────────────┐
│ ヘッダー: 教材名・同期状態                                │
├──────┬──────────────────────────────────┬──────────────┤
│      │                                  │              │
│ 左   │        中央: ページ表示           │   右パネル   │
│      │                                  │              │
│ サイド│    ・同期表示                    │ - 用語       │
│ バー │    ・ズーム・パン                │ - チェック   │
│      │    ・注釈表示                    │   リスト     │
│      │                                  │ - 講師ノート │
│ (サム│                                  │              │
│ ネイル│                                  │              │
│  ＋  │                                  │              │
│ 章)  │                                  │              │
│      │                                  │              │
├──────┴──────────────────────────────────┴──────────────┤
│ ツールバー: ズーム (ページ送りは同期時は無効)              │
└─────────────────────────────────────────────────────────┘
```

### 基本操作

#### 同期中（デフォルト）
- ページは講師が制御
- 自分でページ送り不可
- ズーム・パンは自由

#### 同期OFF時
- ページ送り可能
- 自由に復習できる

#### ズーム
- 講師モードと同じ
- マウスホイール、ボタン、フィット

### 学習支援機能

#### 1. 用語パネル
**場所**: 右パネル「用語」タブ

**内容**: そのページで出る専門用語

**例（⑧鉄筋工事１ ページ5）**:
```
定着
  鉄筋をコンクリートに埋め込み、引き抜けないようにすること

重ね継手
  2本の鉄筋を重ねて継ぐ方法。定着長さ以上重ねる

定着長さ
  鉄筋が引き抜けないために必要な埋め込み長さ
```

**活用方法**:
- 講義中にわからない用語を即確認
- 復習時に用語を再確認

#### 2. チェックリスト
**場所**: 右パネル「チェックリスト」タブ

**内容**: 検査・確認の流れ

**例（⑧鉄筋工事１ ページ6）**:
```
□ かぶりは図面通りか？
  → 最小かぶり厚さ以上であることを確認

□ スペーサーは適切に配置されているか？
  → 1m²あたり4個以上

□ あきは確保されているか？
  → 粗骨材最大寸法の1.25倍以上
```

**活用方法**:
- 講義中にチェックポイントを確認
- 現場で実際にチェックリストとして使用

#### 3. 講師ノート
**場所**: 右パネル「講師ノート」タブ

**内容**: 講師が説明した要点

**活用方法**:
- 講義後の復習
- ノートの補足

### 注釈の見方

#### ピン（📍）
- 赤い点で表示
- 講師が説明している箇所

#### レーザーポインタ（🔦）
- 黄色の光点
- 3秒で消える

#### 重要ポイントカード（⭐）
- モーダルで表示
- 「閉じる」ボタンで閉じる

### フィードバック

**場所**: 画面右下「フィードバック」ボタン

**内容**:
- 5項目評価（1-5）
- 良かった点
- 改善点
- 追加機能要望

**タイミング**: 講義終了後

---

## 🔧 トラブルシューティング

### Q1. 画面が表示されない

**症状**: 白い画面のまま

**原因**: Flaskアプリが停止している

**解決方法**:
```bash
# アプリが起動しているか確認
curl http://localhost:5000/

# 起動していない場合
cd /home/user/webapp
python app.py
```

---

### Q2. 同期しない

**症状**: 講師がページを送っても受講者が追従しない

**原因**: WebSocket接続が切れている

**解決方法**:
1. ブラウザをリロード（F5）
2. ネットワーク接続を確認
3. それでもダメな場合、ルームを再作成

---

### Q3. 画像が表示されない

**症状**: ページ番号は変わるが画像が表示されない

**原因**: 画像ファイルが存在しない

**解決方法**:
```bash
# 画像ファイルを確認
ls -lh /home/user/webapp/static/materials/⑧鉄筋工事１/pages/

# ファイルが無い場合、再変換
cd /home/user/webapp
python scripts/convert_pdfs.py
```

---

### Q4. ページ送りが遅い

**症状**: ページ遷移に3秒以上かかる

**原因**: 画像サイズが大きい、ネットワークが遅い

**解決方法**:
1. ネットワーク速度を確認
2. 画像を軽量化（JPEG品質を下げる）
3. CDN導入を検討

---

### Q5. 注釈が表示されない

**症状**: 講師が注釈を追加しても受講者に表示されない

**原因**: WebSocketイベントが届いていない

**解決方法**:
1. ブラウザのコンソールを確認（F12）
2. `annotation:added` イベントが届いているか確認
3. ブラウザをリロード

---

### Q6. 重要ポイントカードが表示されない

**症状**: カードをクリックしても何も起きない

**原因**: JavaScriptエラー

**解決方法**:
1. ブラウザのコンソールを確認（F12）
2. エラーメッセージを確認
3. ブラウザをリロード

---

## ❓ よくある質問（FAQ）

### Q1. 何人まで同時接続できますか？

**A**: 理論的には無制限ですが、推奨は**50人まで**です。

理由:
- WebSocket接続数の制限
- サーバーのメモリ・CPU負荷

50人以上の場合:
- Gunicorn + Nginx で本番デプロイ
- Redis でセッション管理
- ロードバランサー導入

---

### Q2. 録画機能はありますか？

**A**: 現在は未実装です。Phase 3で実装予定です。

代替案:
- 画面録画ソフト（OBS Studio等）
- Zoom/Google Meetの録画機能

---

### Q3. モバイルで使えますか？

**A**: タブレットは部分対応、スマートフォンは未対応です。

推奨デバイス:
- デスクトップPC（最適）
- ノートPC（最適）
- タブレット（10インチ以上、一部レイアウト崩れあり）
- スマートフォン（未対応、Phase 3で対応予定）

---

### Q4. オフラインで使えますか？

**A**: いいえ、インターネット接続が必須です。

理由:
- WebSocketでリアルタイム同期
- 画像をサーバーから読み込み

将来対応:
- PWA化
- Service Worker でオフライン対応

---

### Q5. 他の教材にもメタデータを追加できますか？

**A**: はい、可能です。

手順:
1. `static/materials/{教材ID}/metadata.json` を編集
2. 講師ノート・用語・チェックリストを追加
3. ブラウザをリロード

テンプレート:
```json
{
  "id": "教材ID",
  "title": "教材名",
  "category": "カテゴリ",
  "pages": [
    {
      "page_id": "001",
      "page_number": 1,
      "image_url": "/static/materials/教材ID/pages/001.jpg",
      "thumbnail_url": "/static/materials/教材ID/thumbs/001.jpg",
      "instructor_notes": [
        "ノート1",
        "ノート2"
      ],
      "glossary": [
        {"term": "用語1", "definition": "定義1"},
        {"term": "用語2", "definition": "定義2"}
      ],
      "checklist": [
        {"id": "c1", "text": "チェック1", "checked": false}
      ]
    }
  ]
}
```

---

### Q6. 認証機能はありますか？

**A**: 現在は未実装です。URLを知っていれば誰でもアクセス可能です。

将来対応:
- ログイン機能
- ルームパスワード
- 招待制（メールアドレス登録）

---

### Q7. データはどこに保存されますか？

**A**: 
- **教材画像**: `static/materials/{教材ID}/pages/`
- **メタデータ**: `static/materials/{教材ID}/metadata.json`
- **フィードバック**: `data/feedback.json`
- **ルーム状態**: メモリ（サーバー再起動で消失）

将来対応:
- PostgreSQL/MySQL でデータベース化
- S3互換ストレージで画像管理

---

### Q8. 複数のルームを同時に開催できますか？

**A**: はい、可能です。

制限:
- サーバーリソース次第
- 推奨は同時3ルームまで

---

### Q9. 講義中にエラーが出たらどうすればいいですか？

**A**: 
1. **まず落ち着く**: 受講者には「少々お待ちください」
2. **ブラウザリロード**: F5キーでリロード
3. **状態復元**: WebSocketが自動再接続し、現在ページに復帰
4. **それでもダメ**: 新しいルームを作成し、URLを再共有

---

### Q10. サポートはありますか？

**A**: 
- **GitHub Issues**: https://github.com/bmwz376-cmd/marutami/issues
- **ドキュメント**: `/home/user/webapp/docs/`
- **README**: `/home/user/webapp/README.md`

---

## 📞 サポート・問い合わせ

### ドキュメント
- **README**: `/home/user/webapp/README.md`
- **改善提案書**: `/home/user/webapp/docs/improvement_proposals.md`
- **完了レポート**: `/home/user/webapp/docs/feedback_cycle_report.md`

### GitHub
- **リポジトリ**: https://github.com/bmwz376-cmd/marutami.git
- **Issues**: https://github.com/bmwz376-cmd/marutami/issues

---

## 🎉 さあ、始めましょう！

**準備ができたら**:
1. トップページにアクセス
2. 教材を選択
3. ルームを作成
4. URLを共有
5. 講義開始！

**成功を祈っています！** 🚀

---

**最終更新**: 2026-01-07  
**作成者**: AI Developer  
**バージョン**: 1.0  
