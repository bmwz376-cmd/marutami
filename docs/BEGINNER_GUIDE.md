# 📘 初心者向け 教材プラットフォーム 使い方ガイド

## 🎯 このガイドの目的

このガイドでは、教材プラットフォームを初めて使う方向けに、**注釈機能（ピン・レーザーポインタ）** を中心に、ステップバイステップで説明します。

---

## 🚀 すぐに始める - 3ステップ

### ステップ 1: 講師画面にアクセス

**講師用URL（デモ）:**
```
https://5000-io03tl6brmjjjtvbi4p77-0e616f0a.sandbox.novita.ai/instructor/e0e26a59
```

👆 このURLをクリックして、ブラウザで開いてください。

---

### ステップ 2: 画面の見方を理解する

講師画面は **3つの列** に分かれています：

```
┌────────────┬──────────────────┬────────────┐
│ 左サイドバー │   中央（メイン）   │ 右パネル    │
│            │                  │            │
│ サムネイル  │   大きな画像      │ 講師ツール  │
│ 一覧       │   +              │            │
│            │   注釈レイヤー    │            │
└────────────┴──────────────────┴────────────┘
```

#### 左サイドバー
- 教材の **全ページのサムネイル** が表示されます
- クリックすると、そのページにジャンプします

#### 中央（メイン画面）
- **現在のページが大きく表示** されます
- この画面に **注釈（ピン・レーザー等）** を描画します
- ツールバーで、ズーム・ページ送りができます

#### 右パネル（講師ツール）
- **4つのタブ** があります：
  1. **制御** - 同期ON/OFF、参加者リスト
  2. **注釈** 👈 ここで注釈ツールを選びます！
  3. **ノート** - 講師用メモを表示
  4. **重要ポイント** - 重要ポイントカードを表示

---

### ステップ 3: 注釈を使ってみる

#### 🔴 方法 A: ピン（一番簡単）

1. **右パネルの「注釈」タブをクリック**
   ```
   [制御] [注釈] [ノート] [重要ポイント]
          ↑ ここをクリック
   ```

2. **「📍 ピン」ボタンをクリック**
   - ボタンが **青くハイライト** されます
   ```
   📍 ピン  ← これをクリック（青くなる）
   ⭕ 丸
   ▭ 四角
   ✏️ ペン
   🔴 レーザーポインタ
   ```

3. **中央のページ画像をクリック**
   - 赤いピンが表示されます！ 🎉

4. **もう一度クリックすると、別の場所にもピンが追加されます**

#### 🔴 方法 B: レーザーポインタ（3秒で消える）

1. **右パネルの「注釈」タブをクリック**

2. **「🔴 レーザーポインタ」ボタンをクリック**
   - ボタンが **青くハイライト** されます

3. **中央のページ画像をクリック**
   - 赤い円が表示され、**3秒後に自動で消えます**

---

## 📋 よくある質問（FAQ）

### Q1: ボタンを押しても何も起こらない

**原因:**
- ボタンを押した後、再度ボタンを押してしまった可能性があります
- ページがまだ読み込まれていない可能性があります

**解決方法:**
1. ブラウザの **F12** を押して、コンソール（Console）を開く
2. エラーメッセージが出ていないか確認
3. ページを **ハードリロード** する
   - Windows/Linux: `Ctrl + Shift + R`
   - Mac: `Cmd + Shift + R`

---

### Q2: ピンが表示されない

**原因:**
- 注釈モードがオフになっている
- JavaScriptがうまく読み込まれていない

**解決方法:**
1. ブラウザのコンソールを開く（F12 → Console）
2. 以下をコピー&ペーストして実行：
   ```javascript
   instructor.setAnnotationMode('pin');
   ```
3. もう一度、画像をクリックしてみてください

---

### Q3: 間違えてピンを置いてしまった

**解決方法:**
1. **右パネルの「注釈」タブ** を開く
2. **「注釈をクリア」ボタン** をクリック
   - 確認ダイアログが出ます → 「OK」を押す
   - すべての注釈が消えます

---

### Q4: 受講者にも注釈が見えるの？

**はい、見えます！**

- 講師が描いた注釈は、**リアルタイムで受講者の画面にも表示** されます
- 受講者は注釈を見るだけで、自分で描くことはできません

---

## 🎮 その他の機能

### ページ送り

**方法 1: ツールバーのボタン**
```
[←] <前へ>   <次へ> [→]
```

**方法 2: キーボード**
- 次のページ: `→`（右矢印）
- 前のページ: `←`（左矢印）

---

### ズーム

**方法 1: ツールバーのボタン**
```
[-] 縮小    拡大 [+]
```

**方法 2: マウスホイール**
- 拡大: `Ctrl + スクロールアップ`
- 縮小: `Ctrl + スクロールダウン`

---

### 重要ポイントカードを表示

1. **右パネルの「重要ポイント」タブ** をクリック
2. カードを選択してクリック（例: 配筋検査の確認要点）
3. モーダル（ポップアップ）が表示されます
4. 「次へ」ボタンで閉じます

---

## 🧪 動作確認 - 簡単テスト

以下の手順で、注釈機能が正しく動作しているか確認できます：

### テスト 1: ピンを追加

1. 講師画面を開く
2. 右パネルの「注釈」タブ → 「📍 ピン」ボタンをクリック
3. 中央のページ画像をクリック
4. **赤いピンが表示される** → ✅ 成功

### テスト 2: レーザーポインタ

1. 右パネルの「注釈」タブ → 「🔴 レーザーポインタ」ボタンをクリック
2. 中央のページ画像をクリック
3. **赤い円が表示され、3秒後に消える** → ✅ 成功

### テスト 3: 重要ポイントカード

1. 右パネルの「重要ポイント」タブを開く
2. 任意のカードボタンをクリック
3. **モーダルが表示される** → ✅ 成功

---

## 🛠️ トラブルシューティング

### 注釈が動かない場合

#### ステップ 1: ブラウザコンソールを開く

1. **F12** を押す（または、右クリック → 「検証」）
2. **Console** タブをクリック
3. 赤いエラーメッセージが出ていないか確認

#### ステップ 2: 動作テスト（コピペ）

以下をコピーして、コンソールに貼り付けて実行：

```javascript
// テスト 1: annotationLayer が存在するか
console.log('annotationLayer:', annotationLayer);

// テスト 2: ピンモードを設定
instructor.setAnnotationMode('pin');

// テスト 3: 重要ポイントカードを表示
instructor.showImportantCard('テスト', ['項目1', '項目2', '項目3']);
```

**期待される結果:**
- `annotationLayer:` → AnnotationLayerオブジェクトが表示される
- `注釈モード: pin` がコンソールに表示される
- 重要ポイントカードのモーダルが表示される

**エラーが出る場合:**
- `annotationLayer is not defined` → ページをリロードしてください
- `instructor is not defined` → JavaScriptの読み込みに失敗しています

#### ステップ 3: ハードリロード

- Windows/Linux: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

---

## 📞 サポート

### 詳細なトラブルシューティング

より詳しい対処方法は、以下のドキュメントを参照してください：

```
/home/user/webapp/docs/TROUBLESHOOTING_ANNOTATIONS.md
```

### テストページ

注釈機能を単体でテストできるページがあります：

```
https://5000-io03tl6brmjjjtvbi4p77-0e616f0a.sandbox.novita.ai/test/annotations
```

---

## 🎓 講義の流れ（30分の例）

### 【0-5分】導入
- ページ1-3: 配筋の基本、RC造の特徴
- **ピン** で鉄筋とコンクリートの位置を指示

### 【5-15分】基本知識
- ページ4-7: 鉄筋の種類、定着・重ね継手、あきとかぶり
- **レーザーポインタ** で図を説明
- **重要ポイントカード**: 「定着長さの計算」

### 【15-25分】実践知識
- ページ8-10: 鉄筋の役割と配置
- **ピン** で主筋・帯筋の位置を指示
- **重要ポイントカード**: 「配筋検査の確認要点」

### 【25-30分】まとめ
- ページ18: まとめ
- チェックリストで復習
- フィードバック収集

---

## 📚 関連ドキュメント

| ドキュメント | 内容 |
|-------------|------|
| `STARTUP_GUIDE.md` | 全体の起動ガイド（管理者向け） |
| `QUICK_REFERENCE.md` | クイックリファレンス（全機能） |
| `TROUBLESHOOTING_ANNOTATIONS.md` | 注釈機能のトラブルシューティング |
| `TEST_REPORT.md` | 動作テスト結果 |

---

## ✅ まとめ

### 注釈ツールの基本

1. **右パネルの「注釈」タブを開く**
2. **使いたいツール（例: 📍 ピン）をクリック**
3. **ボタンが青くハイライトされることを確認**
4. **中央のページ画像をクリックして注釈を追加**

### 重要ポイントカード

1. **右パネルの「重要ポイント」タブを開く**
2. **カードボタンをクリック**
3. **モーダルが表示されたら「次へ」で閉じる**

---

## 🎉 これで準備完了！

**講師用URL:**
```
https://5000-io03tl6brmjjjtvbi4p77-0e616f0a.sandbox.novita.ai/instructor/e0e26a59
```

**受講者用URL（受講者に共有）:**
```
https://5000-io03tl6brmjjjtvbi4p77-0e616f0a.sandbox.novita.ai/student/e0e26a59
```

---

**作成日:** 2026-01-07  
**プロジェクト:** Narukawa.co × NL-DG 建設現場教材プラットフォーム  
**GitHub:** https://github.com/bmwz376-cmd/marutami.git
